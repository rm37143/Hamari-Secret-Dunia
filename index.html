<div id="dashboard">
    <div class="online-box">
        <div><span class="status-dot"></span> <span id="display-name">User</span>: Online</div>
        <div id="login-time" style="color: #666;">Time: 00:00</div>
        <button onclick="logout()" style="width: auto; padding: 5px 15px; background: #ff4d4d; border-radius: 10px;">OFF</button>
    </div>

    <div class="login-card" style="width: auto; margin-bottom: 15px; border-left: 5px solid var(--main-pink);">
        <h4 style="margin: 0; color: var(--main-pink); font-size: 0.8rem;">Note for Us:</h4>
        <textarea id="note-text" placeholder="Write something... (e.g., kesy hen ap)" 
            style="width: 90%; border: none; background: transparent; font-style: italic; margin-top: 5px; outline: none;"></textarea>
        <div id="note-info" style="font-size: 0.65rem; color: #aaa; text-align: right;">Last edited: Just now</div>
    </div>

    <div class="login-card" style="width: auto;">
        <h3 style="color: var(--main-pink); margin: 0;">Hamari Secret Dunia</h3>
        <p style="font-style: italic; font-size: 0.85rem;">"N...a, Special for you..."</p>
        <hr border="0" style="border-top: 1px solid #eee;">
        
        <div id="buttons-container">
            <p style="color: #999; font-size: 0.8rem;">Agle Marhale: Message Status & Buttons...</p>
        </div>
    </div>
</div>

<script>
    let heartbeatTimer;

    function checkLogin() {
        const name = document.getElementById('user-name').value;
        const pass = document.getElementById('user-pass').value;
        
        if((name.toLowerCase() === 'awais' && pass === '37143') || 
           (name.toLowerCase() === 'nisha' && pass === 'n37143')) {
            
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            document.getElementById('display-name').innerText = name;
            
            const now = new Date();
            document.getElementById('login-time').innerText = "On: " + now.getHours() + ":" + now.getMinutes();
            
            // Start Heartbeat System
            startHeartbeat(name);
        } else {
            alert("Ghalat Name ya Password!");
        }
    }

    function startHeartbeat(username) {
        // Har 2 minute baad "Online" signal bhejega
        heartbeatTimer = setInterval(() => {
            console.log(username + " is still online...");
            // Kal yahan Google Sheet ka link add karenge
        }, 120000); 
    }

    function logout() {
        clearInterval(heartbeatTimer);
        alert("Logging OFF... Time recorded.");
        location.reload(); // Wapis login page par
    }

    // Browser band hone par alert (Basic protection)
    window.onbeforeunload = function() {
        // 3 minute wala auto-offline logic Google Sheet handle karegi
        return null;
    };
</script>
